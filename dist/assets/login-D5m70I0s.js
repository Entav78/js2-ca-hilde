import{A as i,b as t}from"./app-Dt6L41Z_.js";import{h as l}from"./headers-Bl62LTOv.js";class c{async login(r){try{const e=await fetch(i,{method:"POST",headers:l(),body:JSON.stringify(r)});if(!e.ok)throw new Error("Login failed.");const a=await e.json();console.log("Login Response Data:",a);const o=a.data;if(o?.accessToken){const s={accessToken:o.accessToken,name:o.name,email:o.email,bio:o.bio,avatar:o.avatar,banner:o.banner};return localStorage.setItem("userDetails",JSON.stringify(s)),console.log("User details saved:",s),s}else throw new Error("No accessToken received in response.")}catch(e){throw console.error("Error during login:",e.message),e}}}console.log("Base Path in login.js:",t);console.log("login.js imported");function d(){console.log("Initializing Login Page...");const n=document.forms.login;n?(console.log("Login form found:",n),n.addEventListener("submit",async r=>{r.preventDefault(),console.log("Login form submitted");const e=new FormData(r.target),a={email:e.get("email"),password:e.get("password")};console.log("Form data:",a);try{const s=await new c().login(a);console.log("Login successful:",s),localStorage.setItem("accessToken",s.accessToken),localStorage.setItem("userDetails",JSON.stringify(s)),console.log("Redirecting to:",`${t}/profile/`),window.location.pathname=`${t}/profile/`}catch(o){console.error("Login failed:",o.message),alert(`Login failed: ${o.message}`)}})):console.error("Login form not found.")}export{d as initializeLoginPage};
