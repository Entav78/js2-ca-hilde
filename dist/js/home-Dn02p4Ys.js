import{P as l}from"./postService-BX17DY9b.js";import{b as d}from"./app-BThhd6Gm.js";import"./headers-CUOiYHL-.js";class m{constructor(e){this.containerClass=e,this.container=null}async init(e){if(console.log("Initializing PostsRenderer..."),this.container=document.querySelector(`.${this.containerClass}`),!this.container){console.error(`Container with class "${this.containerClass}" not found.`);return}console.log("Container found:",this.container);try{const t=await e(),n=t?.data||t;n.length>0?this.renderPosts(n):this.renderMessage("No posts available.")}catch(t){this.renderMessage(`Error loading posts: ${t.message}`),console.error("Error fetching posts:",t)}}renderPosts(e){console.log("Rendering posts:",e),this.container.innerHTML="";const t=document.createElement("div");t.className="post-list",e.forEach(n=>{console.log("Rendering post:",n);const o=this.createPostElement(n);t.appendChild(o)}),this.container.appendChild(t)}createPostElement(e){const t=document.createElement("div");if(t.className="post-card",e.media?.url){const s=document.createElement("img");s.src=e.media.url,s.alt=e.media.alt||"Post Image",s.className="post-image",t.appendChild(s)}else console.warn(`No image for post ${e.id}`);const n=document.createElement("div");n.className="post-content";const o=document.createElement("h3");o.className="post-title",o.textContent=e.title||"Untitled Post",o.addEventListener("click",()=>{window.location.href=`${d}/post/?id=${e.id}`});const a=document.createElement("p");a.className="post-body",a.textContent=e.body&&e.body.length>100?`${e.body.substring(0,100)}...`:e.body||"No content available.";const i=document.createElement("div");return i.className="post-tags",i.textContent=`Tags: ${e.tags?.join(", ")||"No tags"}`,n.appendChild(o),n.appendChild(a),n.appendChild(i),t.appendChild(n),t}renderMessage(e){this.container.innerHTML=`<p>${e}</p>`}}function c(){const r=new l,e=new m("post-container");console.log("Renderer container:",e.container),console.log("Fetching from PostService..."),e.init(async()=>await r.readPosts(10,1))}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",()=>{c()}):c();
